{
  "background_color": "#dcc7a1",
  "description": "Save the stories that matter. Read them later",
  "display": "standalone",
  "name": "StoryPile",
  "start_url": "/",
  "scope": "/",
  "theme_color": "#dcc7a1",
  "icons": [
    <% files = Dir.entries(Rails.root.join("app/assets/images/icons/")).select { |f| f.match?(/.+-\d{2,4}x\d{2,4}\.png/) } %>
    <% files.each do |file| %>
      <% match = file.match(/.+-(?<size>\d{2,4}x\d{2,4}).png/) %>
    {
      "src": "<%= image_path "icons/#{file}" %>",
      "sizes": "<%= match[:size] %>",
      "type": "image/png"
    },
    {
      "src": "<%= image_path "icons/#{file}" %>",
      "sizes": "<%= match[:size] %>",
      "type": "image/png",
      "purpose": "maskable"
    }<%= "," unless file == files.last %>
    <% end %>
  ],
  "screenshots": [
    {
      "src": "/screenshots/desktop.png",
      "sizes": "1280x720",
      "type": "image/png",
      "form_factor": "wide"
    },
    {
      "src": "/screenshots/mobile.png",
      "sizes": "540x720",
      "type": "image/png",
      "form_factor": "narrow"
    }
  ]
}
